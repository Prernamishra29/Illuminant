<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Payment Portal</title>
  <link rel="stylesheet" href="css/payment.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
  <div class="portal-container">
    <!-- Left Panel -->
<div class="service-summary-box">
  <div class="service-summary">
    <h2><i class="fas fa-gem"></i> Selected Service</h2>
    <p class="plan-name">Premium Plan Subscription</p>
    <ul>
      <li><i class="fas fa-check-circle"></i> Unlimited Access</li>
      <li><i class="fas fa-check-circle"></i> 24/7 Support</li>
      <li><i class="fas fa-check-circle"></i> No Ads</li>
    </ul>
    <div class="price">
      <span>Total:</span> <strong>$6.00</strong>
    </div>
  </div>
</div>


    <!-- Right Panel -->
    <div class="payment-section">
      <div class="payment-tabs">
        <button class="tab active" data-form="debit">Debit Card</button>
        <button class="tab" data-form="credit">Credit Card</button>
        <button class="tab" data-form="netbanking">NetBanking</button>
      </div>

      <div class="payment-form-container">
        <!-- Debit Card Form -->
        <div class="payment-form" id="form-debit">
          <h3 style="color: #d4af37 !important;">Pay with Debit Card</h3>

          <!-- Updated Card Preview -->
          <div class="card-preview">
            <div class="card" id="card-card">
              <div class="front">
                <div class="logo" id="card-logo"></div>
                <div class="number" id="card-number">#### #### #### ####</div>
                <div class="holder">
                  <label>Card Holder</label>
                  <div id="card-name">John Doe</div>
                </div>
                <div class="expiry">
                  <label>Expires</label>
                  <div id="card-expiry">MM/YY</div>
                </div>
              </div>
              <div class="back">
                <div class="stripe"></div>
                <div class="cvv-box" id="card-cvv">***</div>
              </div>
            </div>
          </div>

          <!-- Form Fields -->
          <div class="input-group">
            <label>Card Number</label>
            <input type="text" id="input-card-number" maxlength="19" placeholder="1234 5678 9012 3456" />
          </div>
          <div class="input-group">
            <label>Cardholder Name</label>
            <input type="text" id="input-card-name" placeholder="John Doe" />
          </div>
          <div class="input-row">
            <div class="input-group">
              <label>Expiry</label>
              <input type="text" id="input-card-expiry" placeholder="MM/YY" />
            </div>
            <div class="input-group">
              <label>CVV</label>
              <input type="password" id="input-card-cvv" maxlength="4" placeholder="123" />
            </div>
          </div>
          <button type="submit">Pay $6</button>
        </div>

        <!-- Credit Card Form -->
        <div class="payment-form hidden" id="form-credit">
          <h3 style="color: #d4af37 !important;">Pay with Credit Card</h3>

          <div class="card-preview">
            <div class="card" id="credit-card">
              <div class="front">
                <div class="logo" id="credit-logo"></div>
                <div class="number" id="credit-number">#### #### #### ####</div>
                <div class="holder">
                  <label>Card Holder</label>
                  <div id="credit-name">Jane Doe</div>
                </div>
                <div class="expiry">
                  <label>Expires</label>
                  <div id="credit-expiry">MM/YY</div>
                </div>
              </div>
              <div class="back">
                <div class="stripe"></div>
                <div class="cvv-box" id="credit-cvv">***</div>
              </div>
            </div>
          </div>

          <div class="input-group">
            <label>Card Number</label>
            <input type="text" id="input-credit-number" maxlength="19" placeholder="1234 5678 9012 3456" />
          </div>
          <div class="input-group">
            <label>Cardholder Name</label>
            <input type="text" id="input-credit-name" placeholder="Jane Doe" />
          </div>
          <div class="input-row">
            <div class="input-group">
              <label>Expiry</label>
              <input type="text" id="input-credit-expiry" placeholder="MM/YY" />
            </div>
            <div class="input-group">
              <label>CVV</label>
              <input type="password" id="input-credit-cvv" maxlength="4" placeholder="123" />
            </div>
          </div>
          <button type="submit">Pay $6</button>
        </div>

        <!-- Bank Transfer Form (ACH Style for USA) -->
        <div class="payment-form hidden" id="form-netbanking">
          <h3 style="color: #d4af37 !important;">Pay via Bank Transfer</h3>

          <!-- Bank Preview -->
          <div class="bank-preview">
            <div class="bank-card" id="bank-card">
              <div class="logo" id="bank-logo">
                <img src="images/bank-placeholder.png" alt="Bank Logo" class="bank-logo-img" />
              </div>
            </div>
          </div>

          <!-- Bank Selection -->
          <div class="input-group">
            <label>Select Your Bank</label>
            <select id="bank-select">
              <option value="">-- Choose Bank --</option>
              <option value="chase">Chase</option>
              <option value="boa">Bank of America</option>
              <option value="wellsfargo">Wells Fargo</option>
              <option value="citi">Citi</option>
            </select>
          </div>

          <!-- ACH Details -->
          <div class="input-group">
            <label>Routing Number</label>
            <input type="text" placeholder="e.g. 123456789" maxlength="9" />
          </div>
          <div class="input-group">
            <label>Account Number</label>
            <input type="text" placeholder="e.g. 000123456789" maxlength="17" />
          </div>

          <button type="submit">Pay $6.00</button>
        </div>


      </div>
    </div>
  </div>

  <script>
  // Tab Switching Logic
  const tabs = document.querySelectorAll('.tab');
  const forms = document.querySelectorAll('.payment-form');

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      forms.forEach(f => f.classList.add('hidden'));
      document.getElementById('form-' + tab.dataset.form).classList.remove('hidden');
    });
  });

  // Generic Card Handler (Credit/Debit)
  function setupCardInteraction(prefix) {
    const card = document.getElementById(`${prefix}-card`);
    const numberInput = document.getElementById(`input-${prefix}-number`);
    const nameInput = document.getElementById(`input-${prefix}-name`);
    const expiryInput = document.getElementById(`input-${prefix}-expiry`);
    const cvvInput = document.getElementById(`input-${prefix}-cvv`);

    const numberDisplay = document.getElementById(`${prefix}-number`);
    const nameDisplay = document.getElementById(`${prefix}-name`);
    const expiryDisplay = document.getElementById(`${prefix}-expiry`);
    const cvvDisplay = document.getElementById(`${prefix}-cvv`);
    const logoDisplay = document.getElementById(`${prefix}-logo`);

    numberInput.addEventListener('input', e => {
      let value = e.target.value.replace(/\D/g, '').substring(0, 16);
      let formatted = '';
      for (let i = 0; i < value.length; i += 4) {
        formatted += value.substring(i, i + 4) + ' ';
      }
      formatted = formatted.trim();
      e.target.value = formatted;
      numberDisplay.textContent = formatted.padEnd(19, '#');
      updateCardLogo(value, logoDisplay);
    });

    nameInput.addEventListener('input', e => {
      nameDisplay.textContent = e.target.value || 'JOHN DOE';
    });

    expiryInput.addEventListener('input', e => {
      let value = e.target.value.replace(/\D/g, '').substring(0, 4);
      if (value.length >= 3) {
        e.target.value = value.slice(0, 2) + '/' + value.slice(2);
      }
      expiryDisplay.textContent = e.target.value || 'MM/YY';
    });

    cvvInput.addEventListener('focus', () => card.classList.add('flip'));
    cvvInput.addEventListener('blur', () => card.classList.remove('flip'));
    cvvInput.addEventListener('input', e => {
      cvvDisplay.textContent = e.target.value.replace(/\D/g, '').substring(0, 4);
    });
  }

  // Card Logo Detection
  function updateCardLogo(number, displayElement) {
    let logo = '';
    if (/^4/.test(number)) logo = 'visa';
    else if (/^5[1-5]/.test(number)) logo = 'mastercard';
    else if (/^3[47]/.test(number)) logo = 'amex';
    else if (/^6(?:011|5)/.test(number)) logo = 'discover';
    displayElement.textContent = logo ? logo.toUpperCase() : 'CARD';
  }

  // Bank Logo Image Update
  const bankSelect = document.getElementById('bank-select');
  const bankLogo = document.getElementById('bank-logo');

  function setBankLogoImage(src, alt) {
    bankLogo.innerHTML = '';
    const img = document.createElement('img');
    img.src = src;
    img.alt = alt;
    img.className = 'bank-logo-img';
    bankLogo.appendChild(img);
  }

  if (bankSelect && bankLogo) {
    // Set default logo on load
    setBankLogoImage('logos/demo.png', 'Demo Bank');

    bankSelect.addEventListener('change', () => {
      const value = bankSelect.value;
      switch (value) {
        case 'chase':
          setBankLogoImage('logos/chase.png', 'Chase Bank');
          break;
        case 'boa':
          setBankLogoImage('logos/boa.png', 'Bank of America');
          break;
        case 'wellsfargo':
          setBankLogoImage('logos/wf.png', 'Wells Fargo');
          break;
        case 'citi':
          setBankLogoImage('logos/citi.png', 'Citi Bank');
          break;
        default:
          setBankLogoImage('logos/demo.png', 'Demo Bank');
      }
    });
  }

  // Initialize Credit and Debit card form listeners
  setupCardInteraction('card');
  setupCardInteraction('credit');
</script>
</body>
</html>

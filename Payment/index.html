<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Payment Portal</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
  <div class="portal-container">
    <!-- Left Panel -->
    <div class="service-summary">
      <h2>Selected Service</h2>
      <p>Premium Plan Subscription</p>
      <ul>
        <li>Unlimited Access</li>
        <li>24/7 Support</li>
        <li>No Ads</li>
      </ul>
      <div class="price">
        <span>Total:</span> <strong>₹500</strong>
      </div>
    </div>

    <!-- Right Panel -->
    <div class="payment-section">
      <div class="payment-tabs">
        <button class="tab active" data-form="debit">Debit Card</button>
        <button class="tab" data-form="credit">Credit Card</button>
        <button class="tab" data-form="netbanking">NetBanking</button>
      </div>

      <div class="payment-form-container">
        <!-- Debit Card Form -->
        <div class="payment-form" id="form-debit">
          <h3>Pay with Debit Card</h3>

          <!-- Animated Card Preview -->
          <div class="card-preview">
            <div class="card" id="card">
              <div class="front">
                <div class="logo" id="card-logo"></div>
                <div class="number" id="card-number">#### #### #### ####</div>
                <div class="holder">
                  <label>Card Holder</label>
                  <div id="card-name">John Doe</div>
                </div>
                <div class="expiry">
                  <label>Expires</label>
                  <div id="card-expiry">MM/YY</div>
                </div>
              </div>
              <div class="back">
                <div class="stripe"></div>
                <div class="cvv-box" id="card-cvv">***</div>
              </div>
            </div>
          </div>

          <!-- Form Fields -->
          <div class="input-group">
            <label>Card Number</label>
            <input type="text" id="input-card-number" maxlength="19" placeholder="1234 5678 9012 3456" />
          </div>
          <div class="input-group">
            <label>Cardholder Name</label>
            <input type="text" id="input-card-name" placeholder="John Doe" />
          </div>
          <div class="input-row">
            <div class="input-group">
              <label>Expiry</label>
              <input type="text" id="input-card-expiry" placeholder="MM/YY" />
            </div>
            <div class="input-group">
              <label>CVV</label>
              <input type="password" id="input-card-cvv" maxlength="4" placeholder="123" />
            </div>
          </div>
          <button type="submit">Pay ₹500</button>
        </div>

        <!-- Placeholder Forms -->
        <div class="payment-form hidden" id="form-credit">
          <h3>Pay with Credit Card</h3>
          <p>Coming Soon</p>
        </div>

        <div class="payment-form hidden" id="form-netbanking">
          <h3>Pay with NetBanking</h3>
          <p>Coming Soon</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    const tabs = document.querySelectorAll('.tab');
    const forms = document.querySelectorAll('.payment-form');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        forms.forEach(f => f.classList.add('hidden'));
        document.getElementById('form-' + tab.dataset.form).classList.remove('hidden');
      });
    });

    const card = document.getElementById('card');
    const numberInput = document.getElementById('input-card-number');
    const nameInput = document.getElementById('input-card-name');
    const expiryInput = document.getElementById('input-card-expiry');
    const cvvInput = document.getElementById('input-card-cvv');

    const cardNumberDisplay = document.getElementById('card-number');
    const cardNameDisplay = document.getElementById('card-name');
    const cardExpiryDisplay = document.getElementById('card-expiry');
    const cardCvvDisplay = document.getElementById('card-cvv');
    const cardLogo = document.getElementById('card-logo');

    numberInput.addEventListener('input', e => {
  let value = e.target.value.replace(/\D/g, '').substring(0, 16);
  let formatted = '';
  for (let i = 0; i < value.length; i += 4) {
    formatted += value.substring(i, i + 4) + ' ';
  }
  formatted = formatted.trim();
  e.target.value = formatted;

  // Update card preview
  cardNumberDisplay.textContent = formatted.padEnd(19, '#');

  // Detect card type
  updateCardLogo(value);
});


    nameInput.addEventListener('input', e => {
      cardNameDisplay.textContent = e.target.value || 'John Doe';
    });

    expiryInput.addEventListener('input', e => {
      cardExpiryDisplay.textContent = e.target.value || 'MM/YY';
    });

    cvvInput.addEventListener('focus', () => card.classList.add('flip'));
    cvvInput.addEventListener('blur', () => card.classList.remove('flip'));
    cvvInput.addEventListener('input', e => {
      cardCvvDisplay.textContent = e.target.value.replace(/\\D/g, '').substring(0, 4);
    });

    function updateCardLogo(number) {
      let logo = '';
      if (/^4/.test(number)) logo = 'visa';
      else if (/^5[1-5]/.test(number)) logo = 'mastercard';
      else if (/^6/.test(number)) logo = 'discover';
      else if (/^3[47]/.test(number)) logo = 'amex';
      else if (/^(60|6521|6522)/.test(number)) logo = 'rupay';
      cardLogo.textContent = logo.toUpperCase();
    }
  </script>
</body>
</html>
